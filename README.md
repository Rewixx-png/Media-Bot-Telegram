# üõ† Media Bot (Native + Local API)

–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π Telegram-–±–æ—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–µ–¥–∏–∞. 
–ù–∞–ø–∏—Å–∞–Ω –Ω–∞ **Python (Aiogram 3)**. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **Local Telegram Bot API Server** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ –¥–æ 2 –ì–ë –∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–µ–∑ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –ø–æ —Å–µ—Ç–∏.

## üöÄ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ **–ì–∏–±—Ä–∏–¥–Ω–æ–º —Ä–µ–∂–∏–º–µ**:
1.  **Telegram Bot API Server** —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫—É –Ω–∞ —Ö–æ—Å—Ç–µ.
2.  **–ë–æ—Ç** —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞—Ç–∏–≤–Ω–æ (Python Process) –Ω–∞ —Ö–æ—Å—Ç–µ, –∏–º–µ–µ—Ç –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ —ç—Ç–∏–º —Ñ–∞–π–ª–∞–º —á–µ—Ä–µ–∑ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É (Zero-Copy).

–≠—Ç–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏ Nginx, SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å—é —Å–∫–∞—á–∏–≤–∞–Ω–∏—è.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìπ **–í–∏–¥–µ–æ -> –ö—Ä—É–∂–æ–∫**: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ª—é–±—ã—Ö –≤–∏–¥–µ–æ/GIF –≤ Video Note (360px).
- üéµ **–ê—É–¥–∏–æ –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä**: WAV (—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –±–∏—Ç–Ω–æ—Å—Ç–∏/—á–∞—Å—Ç–æ—Ç—ã) / OGG (Voice).
- üé¨ **–í–∏–¥–µ–æ -> –ê—É–¥–∏–æ**: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–æ—Ä–æ–∂–∫–∏ –∏–∑ –≤–∏–¥–µ–æ.
- üöÄ **Local API**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∞–π–ª–æ–≤ –¥–æ 2000 –ú–ë.

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Linux (Ubuntu/Debian)
- Python 3.10+
- FFmpeg (`sudo apt install ffmpeg`)
- Docker & Docker Compose (—Ç–æ–ª—å–∫–æ –¥–ª—è API —Å–µ—Ä–≤–µ—Ä–∞)

### 2. –ó–∞–ø—É—Å–∫ Local API Server (Docker)
–°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –æ—Ç–¥–µ–ª—å–Ω–æ. –ü—Ä–∏–º–µ—Ä `docker-compose.yml` –¥–ª—è API:
```yaml
services:
  telegram-bot-api:
    image: aiogram/telegram-bot-api:latest
    entrypoint: telegram-bot-api
    command: >
      --local --api-id=<YOUR_ID> --api-hash=<YOUR_HASH> --http-port=8081 --dir=/var/lib/telegram-bot-api
    volumes:
      - ./data:/var/lib/telegram-bot-api
    ports:
      - "127.0.0.1:8081:8081"
```
–ó–∞–ø–æ–º–Ω–∏—Ç–µ –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ `data` –Ω–∞ —Ö–æ—Å—Ç–µ! (–Ω–∞–ø—Ä–∏–º–µ—Ä: `/root/Bots/BotApi/data`).

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ë–æ—Ç–∞
```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º
git clone <repo_url>
cd Media-Bot-Telegram

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip3 install -r requirements.txt
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (.env)
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:
```ini
BOT_TOKEN=123456:AAH...
ADMIN_ID=123456789

# –î–∞–Ω–Ω—ã–µ –¥–ª—è API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –∫–æ–¥–µ –Ω–∞–ø—Ä—è–º—É—é)
TELEGRAM_API_ID=...
TELEGRAM_API_HASH=...

# –ì–õ–ê–í–ù–û–ï: –ü—É—Ç—å –∫ –¥–∞–Ω–Ω—ã–º API —Å–µ—Ä–≤–µ—Ä–∞ –ù–ê –•–û–°–¢–ï
LOCAL_API_PATH=/root/Bots/BotApi/data
```

### 5. –ó–∞–ø—É—Å–∫
```bash
python3 main.py
```
–ò–ª–∏ —á–µ—Ä–µ–∑ Systemd –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞.

## üõ† Troubleshooting

**–û—à–∏–±–∫–∞: `–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω` –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `LOCAL_API_PATH` –≤ `.env`. –û–Ω –¥–æ–ª–∂–µ–Ω –≤–µ—Å—Ç–∏ —Ä–æ–≤–Ω–æ –≤ —Ç—É –ø–∞–ø–∫—É, –∫—É–¥–∞ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä API —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–∞–π–ª—ã.
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –∑–∞–ø—É—â–µ–Ω —Å —Ñ–ª–∞–≥–æ–º `--local`.
```

#### ### FILE: requirements.txt
*–î–æ–±–∞–≤–∏–ª–∞—Å—å `python-dotenv`.*

```text
aiogram>=3.0.0
aiohttp>=3.8.0
pydantic>=2.0.0
python-dotenv>=1.0.0
```

### [–°–ï–ö–¶–ò–Ø 3]: GIT PUSH

–í—Å—ë —á–∏—Å—Ç–æ. –ó–∞–ª–∏–≤–∞–µ–º.

```bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≥–∏—Ç (–µ—Å–ª–∏ –≤–¥—Ä—É–≥ –Ω–µ—Ç)
git init

# –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∞–π–ª—ã (gitignore –æ—Ç—Å–µ—á–µ—Ç .env)
git add .

# –ö–æ–º–º–∏—Ç
git commit -m "Refactor: Switch to Native Bot + Local API Architecture (Direct FS Access)"

# –£–∫–∞–∑—ã–≤–∞–µ–º –≤–µ—Ç–∫—É (–æ–±—ã—á–Ω–æ main –∏–ª–∏ master)
git branch -M main

# –ï—Å–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω - –ø—Ä–æ—Å—Ç–æ push
git push -u origin main

# –ï—Å–ª–∏ –Ω–µ—Ç, —Å–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤—å remote:
# git remote add origin https://github.com/YOUR_USER/YOUR_REPO.git
# git push -u origin main